{"ast":null,"code":"import axios from 'axios';\nimport { getAuth } from 'firebase/auth';\nconst api = axios.create({\n  baseURL: 'http://localhost:5002/api',\n  withCredentials: true,\n  headers: {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json'\n  }\n});\n\n// Add request interceptor to include auth token\napi.interceptors.request.use(async config => {\n  try {\n    const auth = getAuth();\n    if (auth.currentUser) {\n      const token = await auth.currentUser.getIdToken(true);\n      if (token) {\n        config.headers.Authorization = `Bearer ${token}`;\n      }\n    }\n    return config;\n  } catch (error) {\n    console.error('Error in request interceptor:', error);\n    return Promise.reject(error);\n  }\n}, error => {\n  console.error('Request error:', error);\n  return Promise.reject(error);\n});\n\n// Add response interceptor to handle errors\napi.interceptors.response.use(response => {\n  console.log('API Response:', response.config.url, response.status);\n  return response;\n}, error => {\n  var _error$config, _error$response, _error$response2, _error$response3;\n  console.error('API Error:', {\n    url: (_error$config = error.config) === null || _error$config === void 0 ? void 0 : _error$config.url,\n    status: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status,\n    message: error.message,\n    response: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data\n  });\n  if (((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status) === 401) {\n    // Handle unauthorized access\n    console.error('Authentication required');\n    // You might want to redirect to login here\n  }\n  return Promise.reject(error);\n});\nexport default api;","map":{"version":3,"names":["axios","getAuth","api","create","baseURL","withCredentials","headers","interceptors","request","use","config","auth","currentUser","token","getIdToken","Authorization","error","console","Promise","reject","response","log","url","status","_error$config","_error$response","_error$response2","_error$response3","message","data"],"sources":["C:/WT-one-credit/src/services/api.js"],"sourcesContent":["import axios from 'axios';\nimport { getAuth } from 'firebase/auth';\n\nconst api = axios.create({\n  baseURL: 'http://localhost:5002/api',\n  withCredentials: true,\n  headers: {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json'\n  },\n});\n\n// Add request interceptor to include auth token\napi.interceptors.request.use(\n  async (config) => {\n    try {\n      const auth = getAuth();\n      if (auth.currentUser) {\n        const token = await auth.currentUser.getIdToken(true);\n        if (token) {\n          config.headers.Authorization = `Bearer ${token}`;\n        }\n      }\n      return config;\n    } catch (error) {\n      console.error('Error in request interceptor:', error);\n      return Promise.reject(error);\n    }\n  },\n  (error) => {\n    console.error('Request error:', error);\n    return Promise.reject(error);\n  }\n);\n\n// Add response interceptor to handle errors\napi.interceptors.response.use(\n  (response) => {\n    console.log('API Response:', response.config.url, response.status);\n    return response;\n  },\n  (error) => {\n    console.error('API Error:', {\n      url: error.config?.url,\n      status: error.response?.status,\n      message: error.message,\n      response: error.response?.data\n    });\n    \n    if (error.response?.status === 401) {\n      // Handle unauthorized access\n      console.error('Authentication required');\n      // You might want to redirect to login here\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default api;\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,eAAe;AAEvC,MAAMC,GAAG,GAAGF,KAAK,CAACG,MAAM,CAAC;EACvBC,OAAO,EAAE,2BAA2B;EACpCC,eAAe,EAAE,IAAI;EACrBC,OAAO,EAAE;IACP,cAAc,EAAE,kBAAkB;IAClC,QAAQ,EAAE;EACZ;AACF,CAAC,CAAC;;AAEF;AACAJ,GAAG,CAACK,YAAY,CAACC,OAAO,CAACC,GAAG,CAC1B,MAAOC,MAAM,IAAK;EAChB,IAAI;IACF,MAAMC,IAAI,GAAGV,OAAO,CAAC,CAAC;IACtB,IAAIU,IAAI,CAACC,WAAW,EAAE;MACpB,MAAMC,KAAK,GAAG,MAAMF,IAAI,CAACC,WAAW,CAACE,UAAU,CAAC,IAAI,CAAC;MACrD,IAAID,KAAK,EAAE;QACTH,MAAM,CAACJ,OAAO,CAACS,aAAa,GAAG,UAAUF,KAAK,EAAE;MAClD;IACF;IACA,OAAOH,MAAM;EACf,CAAC,CAAC,OAAOM,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;IACrD,OAAOE,OAAO,CAACC,MAAM,CAACH,KAAK,CAAC;EAC9B;AACF,CAAC,EACAA,KAAK,IAAK;EACTC,OAAO,CAACD,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAAC;EACtC,OAAOE,OAAO,CAACC,MAAM,CAACH,KAAK,CAAC;AAC9B,CACF,CAAC;;AAED;AACAd,GAAG,CAACK,YAAY,CAACa,QAAQ,CAACX,GAAG,CAC1BW,QAAQ,IAAK;EACZH,OAAO,CAACI,GAAG,CAAC,eAAe,EAAED,QAAQ,CAACV,MAAM,CAACY,GAAG,EAAEF,QAAQ,CAACG,MAAM,CAAC;EAClE,OAAOH,QAAQ;AACjB,CAAC,EACAJ,KAAK,IAAK;EAAA,IAAAQ,aAAA,EAAAC,eAAA,EAAAC,gBAAA,EAAAC,gBAAA;EACTV,OAAO,CAACD,KAAK,CAAC,YAAY,EAAE;IAC1BM,GAAG,GAAAE,aAAA,GAAER,KAAK,CAACN,MAAM,cAAAc,aAAA,uBAAZA,aAAA,CAAcF,GAAG;IACtBC,MAAM,GAAAE,eAAA,GAAET,KAAK,CAACI,QAAQ,cAAAK,eAAA,uBAAdA,eAAA,CAAgBF,MAAM;IAC9BK,OAAO,EAAEZ,KAAK,CAACY,OAAO;IACtBR,QAAQ,GAAAM,gBAAA,GAAEV,KAAK,CAACI,QAAQ,cAAAM,gBAAA,uBAAdA,gBAAA,CAAgBG;EAC5B,CAAC,CAAC;EAEF,IAAI,EAAAF,gBAAA,GAAAX,KAAK,CAACI,QAAQ,cAAAO,gBAAA,uBAAdA,gBAAA,CAAgBJ,MAAM,MAAK,GAAG,EAAE;IAClC;IACAN,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAC;IACxC;EACF;EACA,OAAOE,OAAO,CAACC,MAAM,CAACH,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,eAAed,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}